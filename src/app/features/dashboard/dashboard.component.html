<div class="dashboard-container">
  <mat-card class="welcome-card mat-elevation-z4">
    <mat-card-header>
      <mat-card-title class="welcome-title">Welcome, Doctor!</mat-card-title>
      <mat-card-subtitle class="welcome-subtitle">
        Your Medical Management System Dashboard
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content class="welcome-content">
      <p>Today is {{ currentDateTime | date:'fullDate' }}</p>
      <p>Current Time: {{ currentDateTime | date:'shortTime' }}</p>
      <div class="quick-actions">
        <button mat-raised-button color="primary" class="action-button" routerLink="/patients/new">
          <mat-icon>person_add</mat-icon> Add New Patient
        </button>
        <button mat-raised-button color="accent" class="action-button" (click)="scheduleAppointment()">
          <mat-icon>schedule</mat-icon> Schedule Appointment
        </button>
        <button mat-raised-button class="action-button view-reports" (click)="viewReports()">
          <mat-icon>bar_chart</mat-icon> View Reports
        </button>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Key Metrics Section -->
  <div class="metrics-grid">
    <!-- Using ngFor to loop through the metrics data -->
    <mat-card *ngFor="let metric of metrics" class="metric-card mat-elevation-z2">
      <mat-card-content class="metric-content">
        <div class="metric-icon-wrapper" [style.background-color]="metric.color">
          <mat-icon class="metric-icon">{{ metric.icon }}</mat-icon>
        </div>
        <div class="metric-details">
          <div class="metric-value">{{ metric.value | number }}</div>
          <div class="metric-title">{{ metric.title }}</div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Recent Activities/Appointments and Patient Overview -->
  <div class="dashboard-sections">
    <!-- Recent Activities Card -->
    <mat-card class="recent-activities-card mat-elevation-z2">
      <mat-card-header>
        <mat-card-title>Recent Activities</mat-card-title>
        <mat-card-subtitle>Latest patient interactions and updates</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <mat-list>
          <mat-list-item *ngFor="let activity of recentActivities">
            <mat-icon matListItemIcon class="activity-icon">{{ activity.type === 'Appointment' ? 'event' : activity.type === 'Lab Result' ? 'science' : 'local_hospital' }}</mat-icon>
            <div matListItemTitle class="activity-title">{{ activity.type }}: {{ activity.patient }}</div>
            <div matListItemLine class="activity-subtitle">{{ activity.time }} - {{ activity.status }}</div>
            <div matListItemLine class="activity-notes">{{ activity.notes }}</div>
            <mat-divider></mat-divider>
          </mat-list-item>
        </mat-list>
      </mat-card-content>
    </mat-card>

    <!-- Patient Overview Chart Placeholder -->
    <mat-card class="chart-card mat-elevation-z2">
      <mat-card-header>
        <mat-card-title>Patient Visits Overview</mat-card-title>
        <mat-card-subtitle>Monthly patient visits trend</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content class="chart-content">
        <div class="chart-placeholder">
          <!-- This is where a charting library (e.g., Chart.js, ngx-charts) would render a graph -->
          <p>Chart displaying patient visits over time would go here.</p>
          <img src="https://placehold.co/400x200/ADD8E6/000000?text=Patient+Visits+Chart" alt="Patient Visits Chart Placeholder" class="chart-image-placeholder">
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
